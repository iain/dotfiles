#!/usr/bin/env ruby
# frozen_string_literal: true

Pry.config.editor = %(mvim -f --nomru -c "au VimLeave * !open -a iTerm")

require "date"
require "fileutils"
require "json"
require "net/http"
require "open-uri"
require "ostruct"
require "pathname"
require "securerandom"
require "time"
require "yaml"

Thread.abort_on_exception = true

_iterm2_mark = "\e]1337;SetMark\a"

Pry.config.prompt = Pry::Prompt.new(
  "custom",
  "my custom prompt",
  [
    proc { |obj, _level, _| "\e[2;30m #{obj.to_s[0, 32]} │ \e[0m" },
    proc { |obj, _level, _| "\e[2;30m #{(" " * obj.to_s[0, 32].size)} │ \e[0m" },
  ]
)

if defined?(Rails)
  begin
    require "rails/console/app"
    require "rails/console/helpers"
  rescue LoadError
    require "console_app"
    require "console_with_helpers"
  end
end

begin
  require "awesome_print"
  AwesomePrint.pry!
rescue LoadError
  # noop
end

begin
  require "addressable"
rescue LoadError
  # noop
end
